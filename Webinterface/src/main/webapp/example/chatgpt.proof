unsat
(let ((a (* x x))
      (b (* (- 1.0) x)))
  (let-proof
    (
     ;; Assume x^2 < 0
     (C0 (assume (< a 0.0)))

     ;; Case split: (+(<= x 0.0) +(< 0.0 x))
     (Tx (total x 0.0))

     ;; ------------------------
     ;; Case A: (< 0.0 x)  ==>  (<= 0.0 a)
     ;;
     ;; mulpos(<0 x, <0 x, <=0 a) gives: (-(<0 x) + (<=0 a))
     (A1 (mulpos (< 0.0 x) (< 0.0 x) (<= 0.0 a)))

     ;; Resolve with total on pivot (< 0.0 x):
     ;; Tx: (+(<= x 0.0) +(<0 x))
     ;; A1: (-(<0 x) +(<=0 a))
     ;; => (+(<= x 0.0) +(<= 0.0 a))
     (A2 (res (< 0.0 x) Tx A1))

     ;; ------------------------
     ;; Case B: (<= x 0.0)  ==>  (<= 0.0 b)
     ;;
     ;; First, total gives: (+(<= 0.0 b) +(< b 0.0))
     (Tb (total 0.0 b))

     ;; farkas shows contradiction of its args:
     ;; (farkas 1 (<= x 0.0) 1 (< b 0.0)) proves: (-(<= x 0.0) -(< b 0.0))
     ;;
     ;; Combine with Tb on pivot (< b 0.0) to derive: (-(<= x 0.0) +(<= 0.0 b))
     (B1 (res (< b 0.0)
              Tb
              (farkas 1 (<= x 0.0) 1 (< b 0.0))))

     ;; Now use mulpos on (<= 0.0 b) twice to conclude (<= 0.0 a).
     ;; By your convention, mulpos normalizes products, so b*b becomes a.
     ;; (mulpos (<=0 b) (<=0 b) (<=0 a)) proves: (-(<=0 b) +(<=0 a))
     (B2 (mulpos (<= 0.0 b) (<= 0.0 b) (<= 0.0 a)))

     ;; Resolve B1 with B2 on pivot (<= 0.0 b):
     ;; B1: (-(<= x 0.0) +(<=0 b))
     ;; B2: (-(<=0 b) +(<=0 a))
     ;; => (-(<= x 0.0) +(<= 0.0 a))
     (B3 (res (<= 0.0 b) B1 B2))

     ;; ------------------------
     ;; Merge A and B to get unit (+(<= 0.0 a))
     ;;
     ;; A2: (+(<= x 0.0) +(<=0 a))
     ;; B3: (-(<= x 0.0) +(<=0 a))
     ;; resolve on (<= x 0.0) => (+(<=0 a))
     (Nonneg (res (<= x 0.0) A2 B3))

     ;; Finally, contradiction between (< a 0.0) and (<= 0.0 a):
     ;; farkas 1 (< a 0.0) 1 (<= 0.0 a) proves: (-(< a 0.0) -(<= 0.0 a))
     (F (farkas 1 (< a 0.0) 1 (<= 0.0 a)))
    )

    ;; Resolve to empty:
    (res (<= 0.0 a)
         Nonneg
         (res (< a 0.0) C0 F))
  ))


;; This proof was generated by ChatGPT 5.2 with the following three prompts
;; (after it helped me improving the documentation).
;;
;; Can you prove unsatisfiability of  `(< (* x x) 0)`  for a real `x` 
;; in the proof format RESOLUTE?
;;
;;  [ ChatGPT produced a proof with an oracle.  It complained that the
;;    mulPos rule only worked for positive numbers and it couldn't find
;;    a rule to show either 0 <= x or 0 <= -x ]
;;
;; Try case distinction on (< 0 x) and (<= x 0) with total, from (<= x 0)
;; you can derive (<= 0 (- x)) with Farkas, then use mulpos on (< 0 x) (twice)
;; and another mulpos on (<= 0 (- x)). Note that (-x)*(-x) is also (* x x).
;;
;;  [ ChatGPT produced a proof, defining a as (* x x) and b as (* (- 1) x)).
;;    it used poly+ to show (* b b) = a, which took some unnecessary steps.
;;    and it had small problems with how it used the farkas axiom and the
;;    way it wrote real literals. ]
;;
;; There are a few problems in the proof:
;; 1. all numbers in SMT-LIB terms should be real and need a trailing .0,
;;    like in (<= 0.0 x).  Only the farkas coefficients should be integer.
;; 2. It's simpler, because the mulpos axiom already normalizes the polynom,
;;    so `(mulpos (<= 0 b) (<= 0 b) (<= 0 a))` is fine.
;; 3. Note that farkas shows the contradiction of it's arguments, if you 
;;    want to prove a new inequality, you need to combine it with total again.
;;
;;  [ ChatGPT produced the proof listed above ]

